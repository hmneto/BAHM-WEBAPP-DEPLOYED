(this.webpackJsonpapp2=this.webpackJsonpapp2||[]).push([[0],{21:function(t,e,n){t.exports=n(47)},26:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(18),i=n.n(r),c=n(20);n(26);function l(){return window.innerHeight-45}var s,u=n(3),p=n.n(u),m=n(5),g=n(8),d=n.n(g);s="".concat("http://177.11.53.243\n");var h=d.a.create({baseURL:s}),f=function(t,e){var n=new FormData;return n.append("id",t),n.append("token",e),h.post("/FullpageController.php",n)},I=function(t){var e=new FormData;return e.append("token",t),h.post("/echoClient.php",e)},v=function(){return fetch("".concat(s,"/mapStringController.php")).then((function(t){return t.text()}))},E=function(){var t=new FormData;t.append("key",String(10*Math.random()));var e={method:"post",body:t};return fetch("".concat(s,"/GenerateHash.php"),e).then((function(t){return t.text()}))},b=n(19),y=n.n(b),M=n(1),_=n(2),x=function(){function t(e){Object(M.a)(this,t),this.lista=null;var n={};e.forEach((function(t){n[t]=function(t){if(t=new RegExp("[?&]"+encodeURIComponent(t)+"=([^&]*)").exec(window.location.search))return decodeURIComponent(t[1])}(t)})),this.lista=n}return Object(_.a)(t,[{key:"get_list",value:function(){return this.lista}}]),t}(),A=function(){function t(e,n,a,o){Object(M.a)(this,t);this.api=d.a.create({baseURL:"http://177.11.53.243\n"}),this.google=e;var r=document.getElementById("map"),i=new this.google.LatLng(parseFloat(n),parseFloat(a)),c=this.google.MapTypeId.HYBRID;this.map=new this.google.Map(r,{center:i,zoom:o,mapTypeId:c})}return Object(_.a)(t,[{key:"getMap",value:function(){return this.map}},{key:"latLong",value:function(t,e){return new this.google.LatLng(parseFloat(t),parseFloat(e))}},{key:"centerMap",value:function(t,e){var n,a,o,r,i=!1;return this.map.getZoom()>=t&&(n=Math.round(this.map.getCenter().lat()-e),a=Math.ceil(this.map.getCenter().lat()+e),o=Math.round(this.map.getCenter().lng()-e),r=Math.ceil(this.map.getCenter().lng()+e),(i=this._latMax!==n||this._latMin!==a||this._longMax!==o||this._longMin!==r)&&(this._latMax=n,this._latMin=a,this._longMax=o,this._longMin=r)),i?{latMin:this._latMin,latMax:this._latMax,longMin:this._longMin,longMax:this._longMax}:null}},{key:"getPontos",value:function(t,e){var n,a=t.latMin,o=t.latMax,r=t.longMin,i=t.longMax,c=new FormData;return c.append("latMin",String(a)),c.append("latMax",o),c.append("longMin",r),c.append("longMax",i),c.append("pc_id",e),n=c,h.post("/FullmarkerController.php",n)}},{key:"criarIcones",value:function(t,e){var n=this;try{t.forEach((function(t){var a,o=t.latitude,r=t.longitude,i=t.link,c=new n.google.LatLng(parseFloat(o),parseFloat(r)),l=n.map;a=-1===i.indexOf("http")?"".concat("http://177.11.53.243:81/img?nome=imagens_bahm/imagens/\n").concat(i):i;var s=new n.google.Marker({map:l,position:c,icon:a}),u=document.createElement("div"),p=document.createElement("text");p.innerHTML=t.nome_ponto,u.appendChild(p),p.addEventListener("click",(function(){"KM"!==t.tipo_icone&&"false"!==t.pagina&&e(t.pagina)}));var m=new n.google.InfoWindow;s.addListener("click",(function(){m.setContent(u),m.open(this.mapa,s)}))}))}catch(a){console.log("formato array incorreto")}}}]),t}(),O=function(){function t(){Object(M.a)(this,t)}return Object(_.a)(t,[{key:"carregaMapa",value:function(t,e){return function(n){var a,o,r=new x(["lat","long","zooml"]).get_list(),i=function(t,e,n){var a,o,r;return n?(a=t,o=e,r=Number(n),window.location.search=""):(a=localStorage.getItem("lat"),o=localStorage.getItem("long"),r=Number(localStorage.getItem("zoom"))),{latitude:a,longitude:o,zoom:r}}(r.lat,r.long,r.zooml),c=i.latitude,l=i.longitude,s=i.zoom;function u(){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(p.a.mark((function n(){var r,i,c,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(localStorage.setItem("lat",o.getCenter().lat()),localStorage.setItem("long",o.getCenter().lng()),localStorage.setItem("zoom",o.getZoom()),document.getElementById("lat").value=o.getCenter().lat().toFixed(6),document.getElementById("long").value=o.getCenter().lng().toFixed(6),document.getElementById("zoom").value=o.getZoom(),r="".concat(window.location,"?lat=").concat(o.getCenter().lat(),"&long=").concat(o.getCenter().lng(),"&zooml=").concat(o.getZoom()),document.getElementById("link").value=r,i=a.centerMap(8,2)){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,t;case 13:return c=n.sent,n.next=16,a.getPontos(i,c);case 16:if(!(l=n.sent).data.status){n.next=20;break}return alert("cliente n\xe3o cadastrado"),n.abrupt("return");case 20:a.criarIcones(l.data.pontos,e);case 21:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,I(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a=new A(n,c,l,s),o=a.getMap(),u(),o.addListener("zoom_changed",u),o.addListener("drag",u),document.getElementById("control").addEventListener("click",(function(){var t=a.latLong(document.getElementById("lat").value,document.getElementById("long").value);o.panTo(t),o.setZoom(Number(document.getElementById("zoom").value)),u()})),document.getElementById("controll").addEventListener("click",(function(){return d.apply(this,arguments)}))}}}]),t}(),k=function(){localStorage.getItem("lat")&&localStorage.getItem("long")&&localStorage.getItem("zoom")||(localStorage.setItem("lat","-21"),localStorage.setItem("long","-50"),localStorage.setItem("zoom","9"))};function w(){return(w=Object(m.a)(p.a.mark((function t(e,n){var a,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(),t.next=3,v();case 3:a=t.sent,o=new O,y()({key:a}).then(o.carregaMapa(n,e));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(t){var e=t.fun,n=t.phash;return document.title="BAHM - MAPA",window.addEventListener("resize",(function(){var t=l(),e=document.getElementById("map");e&&(e.style.height=t+"px")})),function(t,e){w.apply(this,arguments)}(e,n),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container item"},o.a.createElement("input",{className:"item",type:"text",id:"lat",placeholder:"latitude"}),o.a.createElement("input",{className:"item",type:"text",id:"long",placeholder:"longitude"}),o.a.createElement("input",{className:"item",type:"text",id:"zoom",placeholder:"zoom"}),o.a.createElement("input",{className:"item",type:"text",id:"link",placeholder:"link",style:{flex:1}}),o.a.createElement("button",{className:"item",id:"control"},"Ir para posi\xe7\xe3o"),o.a.createElement("button",{className:"item",id:"controll"},"Solicitar Acesso")),o.a.createElement("div",{id:"map",style:{height:l()}}))},j=n(7),T=n(6),C=function(){function t(e){Object(M.a)(this,t),this.pagina=null,this.concessionaria_pagina=null,this.sites=null,this.contatos=null,this.obj=null;var n=e.data.dados,a=n.nome_pagina,o=n.endereco,r=n.info,i=n.sites,c=n.contatos;this.contatos=c,this.pagina={nome_pagina:a,endereco:o,info:r},this.concessionaria_pagina={info:r};for(var l={},s=0;s<i.length;s++)l[i[s].tipo]||(l[i[s].tipo]=[]),l[i[s].tipo].push(i[s].link);this.obj=l}return Object(_.a)(t,[{key:"get_infos",value:function(){return{pagina:this.pagina,concessionaria_pagina:this.concessionaria_pagina,sites:this.sites,contatos:this.contatos,obj:this.obj}}}]),t}(),F=function(t){Object(j.a)(n,t);var e=Object(T.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(_.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.canvas,n=e.getContext("2d"),a=this.refs.image;a.onload=function(){e.width=document.getElementById("imagem").width,e.height=document.getElementById("imagem").height,n.drawImage(a,0,0),n.font="20px Calibri",n.fillStyle="white";var o=600;n.fillText(t.props.dados.pagina.nome_pagina,30,o),o+=25,n.fillText(t.props.dados.pagina.endereco,30,o),o+=25,t.props.dados.contatos.forEach((function(t){n.fillText("".concat(t.nome_contato?t.nome_contato:""," ").concat(t.telefone?t.telefone:""," ").concat(t.email?t.email:""),30,o),o+=25})),t.props.dados.concessionaria_pagina&&n.fillText("n\xe3o tem"===t.props.dados.concessionaria_pagina.info?"":t.props.dados.concessionaria_pagina.info,30,o)}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("canvas",{id:"tela",ref:"canvas"}),o.a.createElement("img",{alt:"img",id:"imagem",ref:"image",src:"imagem/BAHMCAPA.jpeg",style:{display:"none"}}))}}]),n}(a.Component),P=function(t){Object(j.a)(n,t);var e=Object(T.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return o.a.createElement("iframe",{src:this.props.dados,title:"iframe"})}}]),n}(a.Component),L=function(t){Object(j.a)(n,t);var e=Object(T.a)(n);function n(){var t;Object(M.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={},t}return Object(_.a)(n,[{key:"render",value:function(){return o.a.createElement("img",{frameBorder:"0",marginHeight:"0",marginWidth:"0",src:this.props.dados,alt:"img"})}}]),n}(a.Component),B=(n(45),n(46),function(t){Object(j.a)(n,t);var e=Object(T.a)(n);function n(){var t;Object(M.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={pagina:!1,concessionaria_pagina:0,contatos:[],STREET:[],foto:[],WIKIMAPIA_SAT:[],WIKIMAPIA_FRIO:[],pm:[],site:[],abcr:[],concessionaria:[],FOTO_MAPA:[],WIKIPEDIA:[],LEI:[]},t.topFunction=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},t}return Object(_.a)(n,[{key:"componentDidMount",value:function(){var t=Object(m.a)(p.a.mark((function t(){var e,n,a,o,r,i,c,l,s,u,m,g,d,h,I,v,E,b,y,M,_,x,A,O,k,w;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?e.style.display="block":e.style.display="none"},e=document.getElementById("myBtn"),window.onscroll=function(){n()},a=this.props,o=a.id_pagina,r=a.tes,t.next=6,o;case 6:return i=t.sent,t.next=9,r;case 9:return c=t.sent,t.next=12,f(i,c);case 12:if(l=t.sent,s=l.data.dados.nome_pagina,t.prev=14,s){t.next=17;break}return t.abrupt("return");case 17:u=new C(l),m=u.get_infos(),g=m.pagina,d=m.concessionaria_pagina,h=m.contatos,I=m.obj,document.title="BAHM - ".concat(g.nome_pagina),void 0!==h&&this.setState({contatos:h}),v=I.STREET,E=I.LEI,b=I.FOTO_MAPA,y=I.FOTO,M=I.WIKIMAPIA_FRIO,_=I.WIKIMAPIA_SAT,x=I.WIKIPEDIA,A=I.PM,O=I.SITE,k=I.ABCR,w=I.CONCESSIONARIA,this.setState({pagina:g,concessionaria_pagina:d,STREET:v||[],LEI:E||[],FOTO_MAPA:b||[],WIKIMAPIA_FRIO:M||[],WIKIMAPIA_SAT:_||[],WIKIPEDIA:x||[],concessionaria:w||[],pm:A||[],site:O||[],abcr:k||[],foto:y||[]}),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(14),console.log(t.t0);case 28:case"end":return t.stop()}}),t,this,[[14,25]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){t.setState({pagina:!1,concessionaria_pagina:0,contatos:[],STREET:[],foto:[],WIKIMAPIA_SAT:[],WIKIMAPIA_FRIO:[],pm:[],site:[],abcr:[],concessionaria:[],FOTO_MAPA:[],WIKIPEDIA:[],LEI:[]}),t.props.fun(void 0)}},"VOLTAR"),o.a.createElement("div",{id:"principal"},this.state.pagina&&o.a.createElement(F,{dados:this.state}),[this.state.STREET,this.state.foto,this.state.WIKIMAPIA_SAT,this.state.WIKIMAPIA_FRIO,this.state.pm,this.state.site,this.state.abcr,this.state.concessionaria,this.state.FOTO_MAPA,this.state.LEI,this.state.WIKIPEDIA].map((function(t,e){return t.map((function(t){return 1===e&&-1===t.indexOf("http")||8===e&&-1===t.indexOf("http")?o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(L,{key:t,dados:"".concat("http://177.11.53.243:81/img?nome=imagens_bahm/imagens/\n").concat(t)})):8===e?o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(L,{key:t,dados:t})):o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(P,{key:t,dados:t}))}))}))),o.a.createElement("button",{onClick:this.topFunction,id:"myBtn",title:"Go to top"},"Top"))}}]),n}(a.Component));function R(){return(R=Object(m.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("hash")&&"202f1a85a70879635c94c530541ceecd"!==localStorage.getItem("hash")){t.next=7;break}return t.next=3,E();case 3:e=t.sent,localStorage.setItem("hash",e),t.next=8;break;case 7:e=localStorage.getItem("hash");case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var W=function(){var t=Object(a.useState)(),e=Object(c.a)(t,2),n=e[0],r=e[1],i=function(){return R.apply(this,arguments)}();function l(t){r(t)}return o.a.createElement(o.a.Fragment,null,function(){if(!n)return o.a.createElement(S,{fun:l,phash:i})}(),function(){if(n)return o.a.createElement(B,{tes:i,id_pagina:n,fun:l})}())};i.a.render(o.a.createElement(W,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.8f14d877.chunk.js.map